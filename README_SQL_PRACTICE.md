# SQL Practice Notebook

A hands-on Jupyter notebook to practice SQL queries and production patterns. This notebook is designed to teach commonly used SQL commands, query patterns, performance techniques, and safe practices you would encounter in production systems.

Files in this folder
- `sql_practice.ipynb` — The interactive notebook with examples and sample data
- `practice_db.sqlite` — (optional) SQLite file generated by the notebook when you run it locally

Why this notebook
- Covers real-world SQL topics: SELECTs, JOINs, aggregations, window functions, CTEs, transactions, upserts, and more
- Demonstrates how to analyze and optimize queries with EXPLAIN / ANALYZE patterns
- Uses a realistic e-commerce schema (users, products, categories, orders, order_items) to give practical examples

Prerequisites
- Python 3.8+ installed on your machine
- Jupyter (Notebook or Lab) or VS Code with the Jupyter extension
- Recommended Python packages: pandas, numpy

Quick setup (PowerShell)

```powershell
# (Optional) Create and activate a virtual environment
python -m venv .venv ; .\.venv\Scripts\Activate.ps1

# Install required packages
pip install pandas numpy jupyter

# Start Jupyter Notebook in the project folder
jupyter notebook
# or open folder in VS Code and open the notebook
code .
```

How to use the notebook
1. Open `sql_practice.ipynb` in Jupyter or VS Code.
2. Run cells from top to bottom. The notebook will:
   - create a local SQLite database file (`practice_db.sqlite`) in the working directory,
   - create tables with realistic constraints and indexes,
   - insert sample data (bulk insert patterns shown),
   - run many example queries and show results as pandas DataFrames.
3. Explore each section; modify queries and re-run cells to experiment.

Notebook sections (what you'll practice)
1. Database connection setup — examples for SQLite, and notes for PostgreSQL/MySQL
2. Schema creation & sample data — tables, constraints, indexes, and bulk inserts
3. SELECT basics & filtering — WHERE, LIMIT/OFFSET, ORDER BY, LIKE, IN, BETWEEN
4. JOINs — INNER, LEFT, RIGHT (notes), FULL (notes), cross joins, anti-joins
5. Aggregation — GROUP BY, HAVING, ROLLUP/Grouping Sets (concepts)
6. Window functions — ROW_NUMBER, RANK, DENSE_RANK, LAG/LEAD, SUM() OVER(), moving averages
7. CTEs & recursive CTEs — readability and hierarchical queries
8. Subqueries — correlated and non-correlated, performance trade-offs
9. Indexing & EXPLAIN — creating indexes and interpreting query plans
10. Transactions & isolation — BEGIN/COMMIT/ROLLBACK, SAVEPOINT, concurrency issues
11. DML — INSERT/UPDATE/DELETE patterns, RETURNING/OUTPUT usage
12. Upsert patterns — PostgreSQL `ON CONFLICT`, MySQL `ON DUPLICATE KEY`, `MERGE`
13. Performance patterns & anti-patterns — pagination, N+1, batching, materialized views
14. Security — parameterized queries, least-privilege, masking/encryption suggestions
15. Import/Export & backups — COPY, CSV/JSON exports and verification
16. Running and testing SQL from VS Code — automation, pytest examples, viewing logs

Examples & tips
- Use the helper `run_query(query, params=None, connection=None)` in the notebook to run SQL and return pandas DataFrames.
- For production-like testing, replace the SQLite connector with a PostgreSQL or MySQL connection string (the notebook includes examples and notes).
- Use parameterized queries (avoid string interpolation) to prevent SQL injection when running queries from Python.

Contributing
- Add more example queries and edge cases
- Add tests (pytest fixtures demonstrating expected query results)
- Improve performance example scripts and before/after EXPLAIN output

Troubleshooting
- If the notebook fails when creating the DB, ensure you have write permission in the directory
- If a cell errors on package import, install required packages and restart the kernel

License
MIT — feel free to reuse and modify for learning and practice.

Questions or next steps
- Want a version that targets PostgreSQL or MySQL instead of SQLite?
- Want small unit tests (pytest) that verify a few key queries automatically? Feel free to ask!